<!DOCTYPE html>
<html lang="zxx" class="no-js">
<head>
	<!-- Mobile Specific Meta -->
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<!-- Author Meta -->
	<meta name="author" content="CodePixar">
	<!-- Meta Description -->
	<meta name="description" content="">
	<!-- Meta Keyword -->
	<meta name="keywords" content="">
	<!-- meta character set -->
	<meta charset="UTF-8">
	<!-- Site Title -->
	<title>NetCharm - Domains, Hosting, Apps</title>

	<link href="https://fonts.googleapis.com/css?family=Poppins:300,500,600,900" rel="stylesheet">
		<!--
		CSS
		============================================= -->
		<link rel="stylesheet" href="css/linearicons.css">
		<link rel="stylesheet" href="css/font-awesome.min.css">
		<link rel="stylesheet" href="css/nice-select.css">
		<link rel="stylesheet" href="css/magnific-popup.css">
		<link rel="stylesheet" href="css/bootstrap.css">
		<link rel="stylesheet" href="css/main.css">
	</head>
	<body>



	  <div class="main-wrapper">
			<!-- Start Video Area -->



			<section class="video-area">

				<div class="overlay overlay-bg"></div>
				<div class="container">
					<div class="row justify-content-center">
						<div class="col-md-7">
							<div class="video-content text-center">
								<h1 id="domain-header" class="text-white mb-20">Domain</h1>
							</div>
						</div>
					</div>
				</div>
			</section>
			<!-- End Video Area -->
			<!-- Start Blog Area -->
			<div class="blog-area">

					<div id="status-msg" style="font-weight:bolder" class="alert alert-warning" role="alert">

					</div>
			</div>
			<!-- End Blog Area -->
		</div>


<script async src="https://www.googletagmanager.com/gtag/js?id=UA-1944294-10"></script>
  <script>
  function getUrlVars() {
    var vars = {};
    var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,
    function(m,key,value) {
      vars[key] = value;
    });
    return vars;
  }


	async function fetchAsync (url) {
	  // await response of fetch call
	  let response = await fetch(url);
	  // only proceed once promise is resolved
	  let data = await response.json();
	  // only proceed once second promise is resolved
	  return data;
	}

	function handle_error(err) {
			console.log(err);
			document.getElementById("status-msg").innerHTML = 'Our server is down at the moment! Please try again later'
	}

	function handle_response(response) {
			console.log(response);

			if(response.hasOwnProperty('alert')) {
				document.getElementById("status-msg").innerHTML = response['alert']
			}

			if(response.hasOwnProperty('redirect')) {
				setTimeout(function() {
					window.location.href = response['redirect'];
				 }, 15000);
			}
	}


   var params = getUrlVars();

		if (params.hasOwnProperty('q') && params['q'].length === 24) {
			document.getElementById("status-msg").innerHTML = 'We are removing your email to avoid future communication! Please stay on this page while we process your request...'

			// trigger async function
			// log response or catch error of fetch promise
			fetchAsync('https://bored7a6d.herokuapp.com/' + params['q'] + '/unsub'
				.then(data => handle_response(data))
				.catch(reason => handle_error(reason))

		} else {
			document.getElementById("status-msg").innerHTML = 'This is an invalid request! Please try again later'
		}

	</script>

		<script src="js/vendor/jquery-2.2.4.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"></script>
		<script src="js/vendor/bootstrap.min.js"></script>
		<script src="js/jquery.ajaxchimp.min.js"></script>
		<script src="js/jquery.nice-select.min.js"></script>
		<script src="js/jquery.magnific-popup.min.js"></script>
		<script src="js/main.js"></script>
	</body>
</html>
